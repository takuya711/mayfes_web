<!DOCTYPE html>
<html lang="ja">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>eeic</title>

	<script src="./js/processing.min.js"></script>
	<link rel="stylesheet" href="css/style.css">
	<script src="./js/canvassetting.js"></script>
	<script type="application/processing" data-processing-target="pjs" >
		int i;
		int waveNum1, waveNum2;
		int timer = 0;
		int block=20;
		int waveLimit = 20;
		float towerHeight = 0.45;
		float towerWidth = 0.02;
		float towerStartX = 0.1;
		int waveSpeed = (int)(innerWidth/8);
		Wave[] Waves1 = new Wave[waveLimit];
		Wave[] Waves2 = new Wave[waveLimit];

		void setup() {
			size(innerWidth, innerHeight);
			graphPaper();
			makeTower();
			frameRate(5);
			waveNum1=waveNum2=0;
		}

		void draw() {
			size(innerWidth, innerHeight);
			graphPaper();
			makeTower();
			waveSpeed = (int)(innerWidth/8);

			for (i=0; i<waveNum1; i++) {
				Waves1[i].update();
			}
			for (i=0; i<waveNum2; i++) {
				Waves2[i].update();
			}
			if (random(1)>0.6) {
				Waves1[waveNum1] = new Wave(width*(towerStartX+towerWidth), height*(1-towerHeight));
				if (waveNum1==(waveLimit-1)) {
					waveNum1 -= (waveLimit-1);
				} else {
					waveNum1++;
				}
			}
			if (random(1)>0.6) {
				Waves2[waveNum2] = new Wave(width*(1-towerStartX-towerWidth), height*towerHeight);
				if (waveNum2==(waveLimit-1)) {
					waveNum2 -= (waveLimit-1);
				} else {
					waveNum2++;
				}
			}
		}


		void graphPaper() {
			background(0, 0, 0);
			strokeWeight(1);
			stroke(50);
			for (i=0; i<width/block; i++) {
				line(i*block, 0, i*block, height);
			}
			for (i=0; i<height/block; i++) {
				line(0, i*block, width, i*block);
			}
			timer++;
		}

		class Wave {
			int genTime;
			int xPos, yPos;
			int flag = 0;

			Wave(float x, float y) {
				xPos = (int)x;
				yPos = (int)y;
				genTime = timer;
				flag = 1;
			}

			void update() {
				if (flag==1) {
					strokeWeight(2);
					stroke(random(120), 120, random(120));
					noFill();
					ellipse(xPos, yPos, (timer - genTime)*waveSpeed, (timer - genTime)*waveSpeed);
				}
			}
		}

		void makeTower() {
			strokeWeight(4);
			stroke(150, 0, 0);
			line(width*towerStartX, height, width*(towerStartX+towerWidth), height*(1-towerHeight));
			line(width*(towerStartX+towerWidth), height*(1-towerHeight), width*(towerStartX+towerWidth), height);
			line(width*(1-towerStartX), 0, width*(1-towerStartX-towerWidth), (int)(height*towerHeight));
			line(width*(1-towerStartX-towerWidth), height*towerHeight, width*(1-towerStartX-towerWidth), 0);
		}
	</script>
	<script type="text/javascript" src="./js/excanvas.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

	<!-- Bootstrap -->
	<link href="css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
	<div id="wrapper">

		<canvas id="pjs"/></canvas>

	</div>
	<!-- Header -->
	<canvas id="main"></canvas>
	<header id="header" class="container">
		<div class="row">
			<div class="col-sm-1 col-md-2 col-lg-1 col-md-offset-1 col-lg-offset-2 hidden-xs" id="eeic_logo">
				<a href="./index.html"><img src="./images/eeic_logo_digit_medium.gif"></a>
			</div>
			<div class="col-sm-10 col-sm-offset-1 col-md-offset-0 col-md-8">
				<div class="row">
					<div id="eeic_header" class="col-sm-3 hidden-xs">
						<a href="./index.html"><img src="./images/eeic_header3.gif" alt="EEIC"></a>
					</div>
					<div id="eeic_header" class="col-xs-12 hidden-sm hidden-md hidden-lg">
						<a href="./index.html"><img src="./images/eeic_header3_sm.gif" alt="EEIC"></a>
					</div>
					<!--<div class="col-sm-2 col-sm-offset-2 hidden-xs " id="header_title"><img src="./images/header_title.png" alt="EEIC"></div>-->
				</div>
				<div id="navbar" class="row col-lg-9 col-md-10 col-sm-11 hidden-xs">
					<a href="./exhibition.html"><img src="./images/exhibition.gif" alt="展示"></a>
					<a href="#"><img src="./images/workshop.gif" alt="ワークショップ"></a>
					<a href="#"><img src="./images/access.gif" alt="アクセス"></a>
					<a href="./others.html"><img src="./images/others_animation.gif" alt="その他"></a>
				</div>
				<div id="navbar-xs" class="hidden-sm hidden-md hidden-lg">
					<div class="col-xs-6">
						<a href="./exhibition.html"><img src="./images/exhibition-xs.gif" alt="展示"></a>
					</div>
					<div class="col-xs-6">
						<a href="#"><img src="./images/workshop-xs.gif" alt="ワークショップ"></a>
					</div>
					<div class="col-xs-6">
						<a href="#"><img src="./images/access-xs.gif" alt="アクセス"></a>
					</div>
					<div class="col-xs-6">						
						<a href="./others.html"><img src="./images/others-xs.gif" alt="その他"></a>
					</div>					
				</div>
			</div>
		</div>
	</header>
	<div class="container">
		
	</div>
	<footer id="footer">
		Copyright (c) EEIC五月祭展示「近未来体験2015」All rights reserved.　　
	</footer>
</body>
</html>